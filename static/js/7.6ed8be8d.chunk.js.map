{"version":3,"sources":["components/Uploader.js","components/Tips.js","pages/Home.js"],"names":["Dragger","Upload","Result","styled","div","Component","observer","useStores","ImageStore","UserStore","store","useLocalObservable","width","setWidth","height","setHeight","serverFile","attributes","url","withStr","heightStr","props","showUploadList","beforeUpload","file","setFile","setFilename","name","window","currentUser","test","type","size","message","warning","upload","then","console","log","catch","tip","spinning","isUpLoading","className","InboxOutlined","style","color","rel","target","href","filename","src","alt","onChange","e","value","placeholder","fullStr","Tips","children","Home","Uploader"],"mappings":"gOAOOA,EAAWC,IAAXD,QACDE,EAASC,IAAOC,IAAV,oNAoHGC,EAvGGC,aAAS,WAAO,IAAD,EACAC,cAAzBC,EADyB,EACzBA,WAAYC,EADa,EACbA,UACbC,EAAQC,aAAmB,iBAAO,CACvCC,MAAO,KACPC,SAFuC,SAE9BD,GACRF,EAAME,MAAQA,GAEf,cACC,OAAOF,EAAME,MAAN,aAAoBF,EAAME,OAAU,IAE5CE,OAAQ,KACRC,UATuC,SAS7BD,GACTJ,EAAMI,OAASA,GAEhB,gBACC,OAAOJ,EAAMI,OAAN,aAAqBJ,EAAMI,QAAW,IAE9C,cACC,OAAON,EAAWQ,WAAWC,WAAWC,IAAID,WAAWC,IACpD,gBAAkBR,EAAMS,QAAUT,EAAMU,eAGvCC,EAAQ,CACbC,gBAAgB,EAChBC,aAAc,SAAAC,GAIb,OAHAhB,EAAWiB,QAAQD,GACnBhB,EAAWkB,YAAYF,EAAKG,MAC5BC,OAAOJ,KAAOA,EACTf,EAAUoB,YAIV,wCAAwCC,KAAKN,EAAKO,MAInDP,EAAKQ,KAAO,SACfC,IAAQC,QAAQ,uDACT,IAER1B,EAAW2B,SACTC,MAAK,SAACpB,GACNqB,QAAQC,IAAI,4BACZD,QAAQC,IAAItB,MAEZuB,OAAM,WAAOF,QAAQC,IAAI,gCACpB,IAbNL,IAAQC,QAAQ,8EACT,IALPD,IAAQC,QAAQ,qDACT,KAyBV,OACC,gCACC,cAAC,IAAD,CAAMM,IAAM,2BAAOC,SAAYjC,EAAWkC,YAA1C,SACC,eAAC1C,EAAD,2BAAaqB,GAAb,cACC,mBAAGsB,UAAY,uBAAf,SACC,cAACC,EAAA,EAAD,CAAeC,MAAS,CAACC,MAAO,aAEjC,mBAAGH,UAAY,kBAAf,0EAGA,mBAAGA,UAAY,kBAAf,uHAKF,8BACC,8BACEnC,EAAWQ,WACT,eAACd,EAAD,WACD,0DACA,+BACC,qCACA,6BAAI,mBAAG6C,IAAM,aAAaC,OAAS,SAC/BC,KAAQzC,EAAWQ,WAAWC,WAAWC,IAAID,WAAWC,IADxD,SAEFV,EAAWQ,WAAWC,WAAWC,IAAID,WAAWC,QAElD,oDACA,6BAAKV,EAAW0C,WAChB,0DACA,6BAAI,qBAAKC,IAAO3C,EAAWQ,WAAWC,WAAWC,IAAID,WAAWC,IAAKkC,IAAM,OAC3E,0DACA,+BACC,uBAAOC,SAtCG,SAACC,GAClB5C,EAAMG,SAASyC,EAAEN,OAAOO,QAqCaxB,KAAO,OAAOyB,YAAc,mCAC1D,uBAAOH,SApCI,SAACC,GACnB5C,EAAMK,UAAUuC,EAAEN,OAAOO,QAmCaxB,KAAO,OAAOyB,YAAc,sCAE5D,6BACC,mBAAGR,OAAS,SAASD,IAAM,aAAaE,KAAQvC,EAAM+C,QAAtD,SAAgE/C,EAAM+C,kBAGvE,aC9GFC,EAAOvD,IAAOC,IAAV,yIAeKC,EARGC,aAAS,YAAiB,IAAfqD,EAAc,EAAdA,SACrBlD,EAAaF,cAAbE,UACP,OACC,mCACEA,EAAUoB,YAAc,KAAO,cAAC6B,EAAD,UAAOC,SCXpCC,EAAOtD,aAAS,WACrB,OACC,qCACC,cAAC,EAAD,yCACA,cAACuD,EAAD,UAKYD","file":"static/js/7.6ed8be8d.chunk.js","sourcesContent":["import React from 'react'\nimport {useStores} from '../stores'\nimport {observer, useLocalObservable} from 'mobx-react'\nimport {message, Upload, Spin} from 'antd'\nimport {InboxOutlined} from '@ant-design/icons'\nimport styled from 'styled-components'\n\nconst {Dragger} = Upload\nconst Result = styled.div`\n  margin-top: 30px;\n  border: 1px dashed #ccc;\n  padding: 20px;\n  word-break: break-all;\n\n  > h1 {\n    margin: 20px 0;\n    text-align: center;\n  }\n\n  img {max-width: 500px}\n`\nconst Component = observer(() => {\n\tconst {ImageStore, UserStore} = useStores()\n\tconst store = useLocalObservable(() => ({\n\t\twidth: null,\n\t\tsetWidth(width) {\n\t\t\tstore.width = width\n\t\t},\n\t\tget withStr() {\n\t\t\treturn store.width ? `/w/${store.width}` : ''\n\t\t},\n\t\theight: null,\n\t\tsetHeight(height) {\n\t\t\tstore.height = height\n\t\t},\n\t\tget heightStr() {\n\t\t\treturn store.height ? `/h/${store.height}` : ''\n\t\t},\n\t\tget fullStr() {\n\t\t\treturn ImageStore.serverFile.attributes.url.attributes.url\n\t\t\t\t+ '?imageView2/0' + store.withStr + store.heightStr\n\t\t}\n\t}))\n\tconst props = {\n\t\tshowUploadList: false,\n\t\tbeforeUpload: file => {\n\t\t\tImageStore.setFile(file)\n\t\t\tImageStore.setFilename(file.name)\n\t\t\twindow.file = file\n\t\t\tif (!UserStore.currentUser) {\n\t\t\t\tmessage.warning('请先登录再上传！')\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tif (!/(svg$)|(jpeg$)|(gif$)|(png$)|(jpg$)/ig.test(file.type)) {\n\t\t\t\tmessage.warning('只能上传.svg/.jpeg/.jpg/.png/.gif格式文件')\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tif (file.size > 1024 * 1024) {\n\t\t\t\tmessage.warning('文件大小不能超过1M')\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tImageStore.upload()\n\t\t\t\t.then((serverFile) => {\n\t\t\t\t\tconsole.log('上传成功')\n\t\t\t\t\tconsole.log(serverFile)\n\t\t\t\t})\n\t\t\t\t.catch(() => {console.log('上传失败')})\n\t\t\treturn false\n\t\t},\n\t}\n\tconst bindWidth = (e) => {\n\t\tstore.setWidth(e.target.value)\n\t}\n\tconst bindHeight = (e) => {\n\t\tstore.setHeight(e.target.value)\n\t}\n\treturn (\n\t\t<div>\n\t\t\t<Spin tip = '正在上传' spinning = {ImageStore.isUpLoading}>\n\t\t\t\t<Dragger {...props}>\n\t\t\t\t\t<p className = \"ant-upload-drag-icon\">\n\t\t\t\t\t\t<InboxOutlined style = {{color: 'black'}}/>\n\t\t\t\t\t</p>\n\t\t\t\t\t<p className = \"ant-upload-text\">\n\t\t\t\t\t\t点击或者拖拽上传图片\n\t\t\t\t\t</p>\n\t\t\t\t\t<p className = \"ant-upload-hint\">\n\t\t\t\t\t\t仅支持.jpg/.jpeg/.png/.svg/.gif格式图片，图片最大1M\n\t\t\t\t\t</p>\n\t\t\t\t</Dragger>\n\t\t\t</Spin>\n\t\t\t<div>\n\t\t\t\t<div>\n\t\t\t\t\t{ImageStore.serverFile\n\t\t\t\t\t\t? <Result>\n\t\t\t\t\t\t\t<h1>上传结果</h1>\n\t\t\t\t\t\t\t<dl>\n\t\t\t\t\t\t\t\t<dt>URL</dt>\n\t\t\t\t\t\t\t\t<dd><a rel = \"noreferrer\" target = '_blank'\n\t\t\t\t\t\t\t\t\t\t\t href = {ImageStore.serverFile.attributes.url.attributes.url}>\n\t\t\t\t\t\t\t\t\t{ImageStore.serverFile.attributes.url.attributes.url}</a>\n\t\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t\t\t<dt>文件名</dt>\n\t\t\t\t\t\t\t\t<dd>{ImageStore.filename}</dd>\n\t\t\t\t\t\t\t\t<dt>图片预览</dt>\n\t\t\t\t\t\t\t\t<dd><img src = {ImageStore.serverFile.attributes.url.attributes.url} alt = \"\"/></dd>\n\t\t\t\t\t\t\t\t<dt>更多尺寸</dt>\n\t\t\t\t\t\t\t\t<dd>\n\t\t\t\t\t\t\t\t\t<input onChange = {bindWidth} type = \"text\" placeholder = '请输入宽度'/>\n\t\t\t\t\t\t\t\t\t<input onChange = {bindHeight} type = \"text\" placeholder = '请输入高度'/>\n\t\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t\t\t<dd>\n\t\t\t\t\t\t\t\t\t<a target = '_blank' rel = \"noreferrer\" href = {store.fullStr}>{store.fullStr}</a></dd>\n\t\t\t\t\t\t\t</dl>\n\t\t\t\t\t\t</Result>\n\t\t\t\t\t\t: ''}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\n\t\t\t</div>\n\t\t</div>\n\t)\n})\nexport default Component","import React from 'react'\nimport {useStores} from '../stores'\nimport {observer} from 'mobx-react'\nimport styled from 'styled-components'\n\nconst Tips = styled.div`\n  background: white;\n  color: darkorange;\n  border-radius: 4px;\n  padding: 10px 30px;\n  margin: 30px 0;\n`\nconst Component = observer(({children}) => {\n\tconst {UserStore} = useStores()\n\treturn (\n\t\t<>\n\t\t\t{UserStore.currentUser ? null : <Tips>{children}</Tips>}\n\t\t</>\n\t)\n})\nexport default Component","import React from 'react'\nimport {observer} from 'mobx-react'\nimport Uploader from '../components/Uploader'\nimport Tips from '../components/Tips'\n\nconst Home = observer(() => {\n\treturn (\n\t\t<>\n\t\t\t<Tips>请先登录!!</Tips>\n\t\t\t<Uploader/>\n\t\t</>\n\t)\n})\n\nexport default Home\n"],"sourceRoot":""}