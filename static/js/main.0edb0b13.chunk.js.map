{"version":3,"sources":["components/Header.js","components/Footer.js","components/Loading.js","pages/Login.js","pages/Register.js","App.js","reportWebVitals.js","index.js","models/index.js","stores/user.js","stores/history.js","stores/image.js","stores/auth.js","stores/index.js"],"names":["Header","styled","header","Logo","img","StyledLink","NavLink","Login","div","StyledButton","Button","Component","observer","useStores","UserStore","AuthStore","history","useHistory","useEffect","pullUser","src","alt","to","exact","currentUser","attributes","username","ghost","type","onClick","logout","console","log","push","Footer","footer","href","Loading","layout","labelCol","span","wrapperCol","tailLayout","offset","Wrapper","Title","h1","name","initialValues","remember","onFinish","values","setUsername","setPassword","password","login","then","catch","onFinishFailed","errorInfo","Item","label","rules","required","message","validator","rule","value","test","Promise","reject","length","resolve","min","max","Password","htmlType","register","getFieldValue","Home","lazy","History","About","App","fallback","path","component","Register","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById","AV","init","appId","appKey","serverURL","Auth","user","User","signUp","loginedUser","error","logIn","logOut","current","Uploader","add","file","filename","item","Object","avFile","File","set","save","serverFile","find","page","limit","query","Query","include","skip","descending","equalTo","results","window","makeObservable","this","observable","action","newList","list","concat","isLoading","append","hasMore","finally","newFilename","newFile","isUpLoading","err","resetUser","HistoryStore","reset","ImageStore","context","createContext","stores","useContext"],"mappings":"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","file":"static/js/main.0edb0b13.chunk.js","sourcesContent":["import React, { useEffect } from \"react\";\nimport { useHistory, NavLink } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { Button } from \"antd\";\nimport { useStores } from \"../stores\";\nimport { observer } from \"mobx-react\";\n\nconst Header = styled.header`\n  display: flex;\n  font-size: 18px;\n  align-items: center;\n  padding: 20px 100px;\n  background: #343a40;\n`;\nconst Logo = styled.img`\n  height: 30px;\n`;\nconst StyledLink = styled(NavLink)`\n  margin-left: 30px;\n  color: #94846b;\n  &.active {\n    border-bottom: 1px solid #fff;\n    color: #ffffed;\n  }\n  &:hover {\n    color: #cccecf;\n  }\n`;\nconst Login = styled.div`\n  margin-left: auto;\n`;\nconst StyledButton = styled(Button)`\n  margin-left: 10px;\n`;\n\nconst Component = observer(() => {\n  const { UserStore, AuthStore } = useStores();\n  const history = useHistory();\n  const handleLogin = () => {\n    console.log(\"跳转到登录页面\");\n    history.push(\"/login\");\n  };\n  const handleLogout = () => {\n    AuthStore.logout();\n  };\n  const handleRegister = () => {\n    console.log(\"跳转到注册页面\");\n    history.push(\"/register\");\n  };\n  useEffect(() => {\n    UserStore.pullUser();\n  }, []);\n  return (\n    <Header>\n      <Logo\n        src=\"http://lc-e6wld81j.cn-n1.lcfile.com/njOqeOJysqJDMwEXdeIkee01Byd11CsS/picture.png?imageView2/0\"\n        alt=\"\"\n      />\n      <nav>\n        <StyledLink to=\"/\" exact>\n          首页\n        </StyledLink>\n        <StyledLink to=\"/history\">上传历史</StyledLink>\n        <StyledLink to=\"/about\">关于</StyledLink>\n      </nav>\n      <Login>\n        {UserStore.currentUser ? (\n          <>\n            {UserStore.currentUser.attributes.username}\n            <StyledButton ghost type=\"primary\" onClick={handleLogout}>\n              注销\n            </StyledButton>\n          </>\n        ) : (\n          <>\n            <StyledButton ghost type=\"primary\" onClick={handleLogin}>\n              登录\n            </StyledButton>\n            <StyledButton ghost type=\"primary\" onClick={handleRegister}>\n              注册\n            </StyledButton>\n          </>\n        )}\n      </Login>\n    </Header>\n  );\n});\nexport default Component;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst Footer = styled.footer`\n  padding: 10px 100px;\n  text-align: center;\n  font-size: 12px;\n  color: #aaa;\n  a {\n    padding: 0 10px;\n  }\n`;\n\nfunction Component() {\n  return (\n    <Footer>\n      <address>\n        <a href=\"https://gengzhii.gitee.io/\">blog</a>\n        <a href=\"https://github.com/Straight-GZ/epic\">Github</a>\n      </address>\n    </Footer>\n  );\n}\n\nexport default Component;\n","import React from 'react'\n\nfunction Loading() {\n\treturn (\n\t\t<div>loading</div>\n\t)\n}\n\nexport default Loading","import React from 'react'\nimport {Form, Input, Button} from 'antd'\nimport styled from 'styled-components'\nimport {useStores} from '../stores'\nimport {useHistory} from 'react-router-dom'\n\nconst layout = {\n\tlabelCol: {span: 6},\n\twrapperCol: {span: 18},\n}\nconst tailLayout = {\n\twrapperCol: {offset: 6, span: 18},\n}\nconst Wrapper = styled.div`\n  position: relative;\n  max-width: 600px;\n  margin: 30px auto;\n  box-shadow: 2px 2px 4px 0 rgba(0, 0, 0, 0.1);\n  border-radius: 4px;\n  padding: 20px;\n\n  > div {\n    position: absolute;\n  }\n`\nconst Title = styled.h1`\n  position: absolute;\n  top: 5%;\n  left: 60%;\n  color: white;\n  text-align: center;\n  margin-bottom: 30px;\n`\n\nconst Component = () => {\n\tconst {AuthStore} = useStores()\n\tconst history = useHistory()\n\tconst onFinish = (values) => {\n\t\tconsole.log('Success:', values)\n\t\tAuthStore.setUsername(values.username)\n\t\tAuthStore.setPassword(values.password)\n\t\tAuthStore.login()\n\t\t\t.then(() => {\n\t\t\t\tconsole.log('登录成功，跳转到首页')\n\t\t\t\thistory.push('/')\n\t\t\t}).catch(() => console.log('登录失败'))\n\t}\n\t\n\tconst onFinishFailed = (errorInfo) => {\n\t\tconsole.log('Failed:', errorInfo)\n\t}\n\tconst validateUsername = (rule, value) => {\n\t\tif (/\\W/.test(value)) return Promise.reject('只能是字母下划线')\n\t\tif (value.length < 4 || value.length > 10) return Promise.reject('用户名4~10个字符')\n\t\treturn Promise.resolve()\n\t}\n\treturn (\n\t\t<Wrapper>\n\t\t\t<Title>登录</Title>\n\t\t\t<div>\n\t\t\t\t<Form\n\t\t\t\t\t{...layout}\n\t\t\t\t\tname = \"basic\"\n\t\t\t\t\tinitialValues = {{remember: true}}\n\t\t\t\t\tonFinish = {onFinish}\n\t\t\t\t\tonFinishFailed = {onFinishFailed}\n\t\t\t\t>\n\t\t\t\t\t<Form.Item\n\t\t\t\t\t\tlabel = \"用户名\"\n\t\t\t\t\t\tname = \"username\"\n\t\t\t\t\t\trules = {[{required: true, message: '请输入用户名'},\n\t\t\t\t\t\t\t{validator: validateUsername}]}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Input/>\n\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\n\t\t\t\t\t<Form.Item\n\t\t\t\t\t\tlabel = \"密码\"\n\t\t\t\t\t\tname = \"password\"\n\t\t\t\t\t\trules = {[\n\t\t\t\t\t\t\t{required: true, message: '请输入密码'},\n\t\t\t\t\t\t\t{min: 4, message: '最少4个字符'},\n\t\t\t\t\t\t\t{max: 10, message: '最多10个字符'}\n\t\t\t\t\t\t]}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Input.Password/>\n\t\t\t\t\t</Form.Item>\n\t\t\t\t\t<Form.Item {...tailLayout}>\n\t\t\t\t\t\t<Button ghost type = \"primary\" htmlType = \"submit\">\n\t\t\t\t\t\t\t提交\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Form.Item>\n\t\t\t\t</Form>\n\t\t\t</div>\n\t\t</Wrapper>\n\t)\n}\nexport default Component","import React from 'react'\nimport {Form, Input, Button} from 'antd'\nimport styled from 'styled-components'\nimport {useStores} from '../stores'\nimport {useHistory} from 'react-router-dom'\n\nconst layout = {\n\tlabelCol: {span: 6},\n\twrapperCol: {span: 18},\n}\nconst tailLayout = {\n\twrapperCol: {offset: 6, span: 18},\n}\nconst Wrapper = styled.div`\n  max-width: 600px;\n  margin: 30px auto;\n  box-shadow: 2px 2px 4px 0 rgba(0, 0, 0, 0.2);\n  border-radius: 4px;\n  padding: 20px;\n\n  label {\n    color: white\n  }\n`\nconst Title = styled.h1`\n  color: white;\n  text-align: center;\n  margin-bottom: 30px;\n`\n\nconst Component = () => {\n\tconst history = useHistory()\n\tconst {AuthStore} = useStores()\n\t\n\tconst onFinish = (values) => {\n\t\tconsole.log('Success:', values)\n\t\tAuthStore.setUsername(values.username)\n\t\tAuthStore.setPassword(values.password)\n\t\tAuthStore.register()\n\t\t\t.then(() => {\n\t\t\t\tconsole.log('登录成功')\n\t\t\t\thistory.push('/')\n\t\t\t}).catch(() => console.log('失败,什么都不做'))\n\t}\n\t\n\tconst onFinishFailed = (errorInfo) => {\n\t\tconsole.log('Failed:', errorInfo)\n\t}\n\tconst validateUsername = (rule, value) => {\n\t\tif (/\\W/.test(value)) return Promise.reject('只能是字母下划线')\n\t\tif (value.length < 4 || value.length > 10) return Promise.reject('用户名4~10个字符')\n\t\treturn Promise.resolve()\n\t}\n\tconst validateConfirm = ({getFieldValue}) => ({\n\t\tvalidator(rule, value) {\n\t\t\tif (getFieldValue('password') === value) {\n\t\t\t\treturn Promise.resolve()\n\t\t\t}\n\t\t\treturn Promise.reject('两次密码不一致')\n\t\t}\n\t})\n\treturn (\n\t\t<Wrapper>\n\t\t\t<Title>注册</Title>\n\t\t\t<Form\n\t\t\t\t{...layout}\n\t\t\t\tname = \"basic\"\n\t\t\t\tinitialValues = {{remember: true}}\n\t\t\t\tonFinish = {onFinish}\n\t\t\t\tonFinishFailed = {onFinishFailed}\n\t\t\t>\n\t\t\t\t<Form.Item\n\t\t\t\t\tlabel = \"用户名\"\n\t\t\t\t\tname = \"username\"\n\t\t\t\t\trules = {[{required: true, message: '请输入用户名'},\n\t\t\t\t\t\t{validator: validateUsername}]}\n\t\t\t\t>\n\t\t\t\t\t<Input/>\n\t\t\t\t</Form.Item>\n\t\t\t\t\n\t\t\t\t<Form.Item\n\t\t\t\t\tlabel = \"密码\"\n\t\t\t\t\tname = \"password\"\n\t\t\t\t\trules = {[\n\t\t\t\t\t\t{required: true, message: '请输入密码'},\n\t\t\t\t\t\t{min: 4, message: '最少四个字符'},\n\t\t\t\t\t\t{max: 10, message: '最多10个字符'}\n\t\t\t\t\t]}\n\t\t\t\t>\n\t\t\t\t\t<Input.Password/>\n\t\t\t\t</Form.Item>\n\t\t\t\t<Form.Item\n\t\t\t\t\tlabel = \"确认密码\"\n\t\t\t\t\tname = \"confirmPassword\"\n\t\t\t\t\trules = {[{required: true, message: '再次输入密码'},\n\t\t\t\t\t\tvalidateConfirm]}\n\t\t\t\t>\n\t\t\t\t\t<Input.Password/>\n\t\t\t\t</Form.Item>\n\t\t\t\t\n\t\t\t\t<Form.Item {...tailLayout}>\n\t\t\t\t\t<Button ghost type = \"primary\" htmlType = \"submit\">\n\t\t\t\t\t\t提交\n\t\t\t\t\t</Button>\n\t\t\t\t</Form.Item>\n\t\t\t</Form>\n\t\t</Wrapper>\n\t)\n}\nexport default Component","import {Suspense, lazy} from 'react'\nimport './App.css'\nimport 'antd/dist/antd.css'\nimport Header from './components/Header'\nimport Footer from './components/Footer'\nimport {Switch, Route} from 'react-router-dom'\nimport Loading from './components/Loading'\nimport Login from './pages/Login'\nimport Register from './pages/Register'\n// import Home from './pages/Home'\n// import History from './pages/History'\n// import About from './pages/About'\nconst Home = lazy(() => import('./pages/Home'))\nconst History = lazy(() => import('./pages/History'))\nconst About = lazy(() => import('./pages/About'))\n\nfunction App() {\n\treturn (\n\t\t<>\n\t\t\t<Header/>\n\t\t\t<main>\n\t\t\t\t<Suspense fallback = {<Loading/>}>\n\t\t\t\t\t<Switch>\n\t\t\t\t\t\t<Route path = \"/\" exact component = {Home}/>\n\t\t\t\t\t\t<Route path = \"/history\" component = {History}/>\n\t\t\t\t\t\t<Route path = \"/about\" component = {About}/>\n\t\t\t\t\t\t<Route path = \"/Login\" component = {Login}/>\n\t\t\t\t\t\t<Route path = \"/Register\" component = {Register}/>\n\t\t\t\t\t</Switch>\n\t\t\t\t</Suspense>\n\t\t\t</main>\n\t\t\t<Footer/>\n\t\t</>\n\t)\n}\n\nexport default App\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import ReactDOM from 'react-dom'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\nimport {HashRouter as Router} from 'react-router-dom'\n\nReactDOM.render(\n\t<Router>\n\t\t<App/>\n\t</Router>,\n\tdocument.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n","import AV, {User} from 'leancloud-storage'\n\nAV.init({\n\tappId: 'e6wld81jCjyerNYouHABXBxd-gzGzoHsz',\n\tappKey: 'C1HCNGu4kPO6UnLHlwkPiQc1',\n\tserverURL: 'https://e6wld81j.lc-cn-n1-shared.com'\n})\nconst Auth = {\n\tregister(username, password) {\n\t\tlet user = new User()\n\t\tuser.setUsername(username)\n\t\tuser.setPassword(password)\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tuser.signUp().then(loginedUser => resolve(loginedUser),\n\t\t\t\terror => reject(error))\n\t\t})\n\t},\n\t\n\tlogin(username, password) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tUser.logIn(username, password).then(loginedUser =>\n\t\t\t\tresolve(loginedUser), error => reject(error))\n\t\t})\n\t},\n\t\n\tlogout() {\n\t\tUser.logOut()\n\t},\n\t\n\tgetCurrentUser() {\n\t\treturn User.current()\n\t}\n}\n\nconst Uploader = {\n\tadd(file, filename) {\n\t\tconst item = new AV.Object('Image')\n\t\tconst avFile = new AV.File(filename, file)\n\t\titem.set('filename', filename)\n\t\titem.set('owner', AV.User.current())\n\t\titem.set('url', avFile)\n\t\treturn new Promise((resolve, reject) => {\n\t\t\titem.save().then(serverFile => resolve(serverFile), error => reject(error))\n\t\t})\n\t},\n\tfind({page = 0, limit = 10}) {\n\t\tconst query = new AV.Query('Image')\n\t\tquery.include('owner')\n\t\tquery.limit(limit)\n\t\tquery.skip(page * limit)\n\t\tquery.descending('createAt')\n\t\tquery.equalTo('owner', AV.User.current())\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tquery.find()\n\t\t\t\t.then(results => resolve(results))\n\t\t\t\t.catch(error => reject(error))\n\t\t})\n\t}\n}\nwindow.Uploader = Uploader\nexport {Auth, Uploader}","import { observable, action, makeObservable } from \"mobx\";\nimport { Auth } from \"../models\";\n\nclass UserStore {\n  @observable currentUser = null;\n\n  constructor() {\n    makeObservable(this);\n  }\n\n  @action pullUser() {\n    this.currentUser = Auth.getCurrentUser();\n  }\n\n  @action resetUser() {\n    this.currentUser = null;\n  }\n}\n\nexport default new UserStore();\n","import {observable, action, makeObservable} from 'mobx'\nimport {message} from 'antd'\nimport {Uploader} from '../models'\n\nclass HistoryStore {\n\t@observable list = []\n\t@observable isLoading = false\n\t@observable hasMore = true\n\t@observable page = 0\n\tlimit = 10\n\t\n\tconstructor() {\n\t\tmakeObservable(this)\n\t}\n\t\n\t@action append(newList) {\n\t\tthis.list = this.list.concat(newList)\n\t}\n\t\n\t@action find() {\n\t\tthis.isLoading = true\n\t\tUploader.find({page: this.page, limit: this.limit})\n\t\t\t.then(newList => {\n\t\t\t\tthis.append(newList)\n\t\t\t\tthis.page++\n\t\t\t\tif (newList.length < this.limit) {\n\t\t\t\t\tthis.hasMore = false\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => message.error('数据加载失败'))\n\t\t\t.finally(() => this.hasMore = false)\n\t}\n\t\n\t@action reset() {\n\t\tthis.list = []\n\t\tthis.isLoading = false\n\t\tthis.hasMore = true\n\t\tthis.page = 0\n\t}\n}\n\n\nexport default new HistoryStore()","import {observable, action, makeObservable} from 'mobx'\nimport {Uploader} from '../models'\nimport {message} from 'antd'\n\nclass ImageStore {\n\t@observable filename = ''\n\t@observable file = null\n\t@observable isUpLoading = false\n\t@observable serverFile = null\n\t\n\tconstructor() {\n\t\tmakeObservable(this)\n\t}\n\t\n\t@action setFilename(newFilename) {\n\t\tthis.filename = newFilename\n\t}\n\t\n\t@action setFile(newFile) {\n\t\tthis.file = newFile\n\t}\n\t\n\t@action upload() {\n\t\tthis.isUpLoading = true\n\t\tthis.serverFile = null\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tUploader.add(this.file, this.filename)\n\t\t\t\t.then((serverFile) => {\n\t\t\t\t\tthis.serverFile = serverFile\n\t\t\t\t\tresolve(serverFile)\n\t\t\t\t}).catch(error => {\n\t\t\t\tmessage.error('上传失败')\n\t\t\t\treject(error)\n\t\t\t}).finally(() => {\n\t\t\t\tthis.isUpLoading = false\n\t\t\t})\n\t\t})\n\t}\n\t\n\t@action reset() {\n\t\tthis.isUpLoading = false\n\t\tthis.serverFile = null\n\t}\n}\n\nexport default new ImageStore()","import {observable, action, makeObservable} from 'mobx'\nimport {Auth} from '../models'\nimport UserStore from './user'\nimport HistoryStore from './history'\nimport ImageStore from './image'\nimport {message} from 'antd'\n\nclass AuthStore {\n\t@observable values = {\n\t\tusername: '',\n\t\tpassword: ''\n\t}\n\t\n\tconstructor() {\n\t\tmakeObservable(this)\n\t}\n\t\n\t\n\t@action setUsername(username) {\n\t\tthis.values.username = username\n\t}\n\t\n\t@action setPassword(password) {\n\t\tthis.values.password = password\n\t}\n\t\n\t@action login() {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tAuth.login(this.values.username, this.values.password)\n\t\t\t\t.then(user => {\n\t\t\t\t\tUserStore.pullUser()\n\t\t\t\t\tresolve(user)\n\t\t\t\t}).catch(err => {\n\t\t\t\tmessage.error('登录失败')\n\t\t\t\tUserStore.resetUser()\n\t\t\t\treject(err)\n\t\t\t})\n\t\t})\n\t}\n\t\n\t@action register() {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tAuth.register(this.values.username, this.values.password)\n\t\t\t\t.then(user => {\n\t\t\t\t\tconsole.log('注册成功')\n\t\t\t\t\tUserStore.pullUser()\n\t\t\t\t\tresolve(user)\n\t\t\t\t}).catch(err => {\n\t\t\t\tmessage.error('注册失败')\n\t\t\t\tUserStore.resetUser()\n\t\t\t\treject(err)\n\t\t\t})\n\t\t})\n\t}\n\t\n\t@action logout() {\n\t\tAuth.logout()\n\t\tUserStore.resetUser()\n\t\tHistoryStore.reset()\n\t\tImageStore.reset()\n\t}\n}\n\nexport default new AuthStore()","import {createContext, useContext} from 'react'\nimport AuthStore from './auth'\nimport UserStore from './user'\nimport ImageStore from './image'\nimport HistoryStore from './history'\n\nconst context = createContext({\n\tAuthStore,\n\tUserStore,\n\tImageStore, HistoryStore\n})\nwindow.stores = {\n\tAuthStore,\n\tUserStore, ImageStore, HistoryStore\n}\nexport const useStores = () => useContext(context)"],"sourceRoot":""}