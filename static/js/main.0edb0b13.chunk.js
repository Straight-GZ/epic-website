(this["webpackJsonpreact-epic"]=this["webpackJsonpreact-epic"]||[]).push([[0],{156:function(e,t,n){},230:function(e,t,n){"use strict";n.r(t);var r,i,o,s,a,c,l=n(19),u=n.n(l),p=n(0),b=(n(156),n(157),n(28)),j=n(47),h=n(13),f=n(29),O=n(130),d=n(54),g=n(112),m=n(4),y=f.a.header(r||(r=Object(b.a)(["\n  display: flex;\n  font-size: 18px;\n  align-items: center;\n  padding: 20px 100px;\n  background: #343a40;\n"]))),x=f.a.img(i||(i=Object(b.a)(["\n  height: 30px;\n"]))),w=Object(f.a)(j.b)(o||(o=Object(b.a)(["\n  margin-left: 30px;\n  color: #94846b;\n  &.active {\n    border-bottom: 1px solid #fff;\n    color: #ffffed;\n  }\n  &:hover {\n    color: #cccecf;\n  }\n"]))),v=f.a.div(s||(s=Object(b.a)(["\n  margin-left: auto;\n"]))),P=Object(f.a)(O.a)(a||(a=Object(b.a)(["\n  margin-left: 10px;\n"]))),U=Object(g.a)((function(){var e=Object(d.a)(),t=e.UserStore,n=e.AuthStore,r=Object(h.f)();return Object(p.useEffect)((function(){t.pullUser()}),[]),Object(m.jsxs)(y,{children:[Object(m.jsx)(x,{src:"http://lc-e6wld81j.cn-n1.lcfile.com/njOqeOJysqJDMwEXdeIkee01Byd11CsS/picture.png?imageView2/0",alt:""}),Object(m.jsxs)("nav",{children:[Object(m.jsx)(w,{to:"/",exact:!0,children:"\u9996\u9875"}),Object(m.jsx)(w,{to:"/history",children:"\u4e0a\u4f20\u5386\u53f2"}),Object(m.jsx)(w,{to:"/about",children:"\u5173\u4e8e"})]}),Object(m.jsx)(v,{children:t.currentUser?Object(m.jsxs)(m.Fragment,{children:[t.currentUser.attributes.username,Object(m.jsx)(P,{ghost:!0,type:"primary",onClick:function(){n.logout()},children:"\u6ce8\u9500"})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(P,{ghost:!0,type:"primary",onClick:function(){console.log("\u8df3\u8f6c\u5230\u767b\u5f55\u9875\u9762"),r.push("/login")},children:"\u767b\u5f55"}),Object(m.jsx)(P,{ghost:!0,type:"primary",onClick:function(){console.log("\u8df3\u8f6c\u5230\u6ce8\u518c\u9875\u9762"),r.push("/register")},children:"\u6ce8\u518c"})]})})]})})),F=f.a.footer(c||(c=Object(b.a)(["\n  padding: 10px 100px;\n  text-align: center;\n  font-size: 12px;\n  color: #aaa;\n  a {\n    padding: 0 10px;\n  }\n"])));var k=function(){return Object(m.jsx)(F,{children:Object(m.jsxs)("address",{children:[Object(m.jsx)("a",{href:"https://gengzhii.gitee.io/",children:"blog"}),Object(m.jsx)("a",{href:"https://github.com/Straight-GZ/epic",children:"Github"})]})})};var z,C,S,D,I=function(){return Object(m.jsx)("div",{children:"loading"})},L=n(40),q=n(232),A=n(233),H={labelCol:{span:6},wrapperCol:{span:18}},M={wrapperCol:{offset:6,span:18}},B=f.a.div(z||(z=Object(b.a)(["\n  position: relative;\n  max-width: 600px;\n  margin: 30px auto;\n  box-shadow: 2px 2px 4px 0 rgba(0, 0, 0, 0.1);\n  border-radius: 4px;\n  padding: 20px;\n\n  > div {\n    position: absolute;\n  }\n"]))),T=f.a.h1(C||(C=Object(b.a)(["\n  position: absolute;\n  top: 5%;\n  left: 60%;\n  color: white;\n  text-align: center;\n  margin-bottom: 30px;\n"]))),G=function(){var e=Object(d.a)().AuthStore,t=Object(h.f)();return Object(m.jsxs)(B,{children:[Object(m.jsx)(T,{children:"\u767b\u5f55"}),Object(m.jsx)("div",{children:Object(m.jsxs)(q.a,Object(L.a)(Object(L.a)({},H),{},{name:"basic",initialValues:{remember:!0},onFinish:function(n){console.log("Success:",n),e.setUsername(n.username),e.setPassword(n.password),e.login().then((function(){console.log("\u767b\u5f55\u6210\u529f\uff0c\u8df3\u8f6c\u5230\u9996\u9875"),t.push("/")})).catch((function(){return console.log("\u767b\u5f55\u5931\u8d25")}))},onFinishFailed:function(e){console.log("Failed:",e)},children:[Object(m.jsx)(q.a.Item,{label:"\u7528\u6237\u540d",name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"},{validator:function(e,t){return/\W/.test(t)?Promise.reject("\u53ea\u80fd\u662f\u5b57\u6bcd\u4e0b\u5212\u7ebf"):t.length<4||t.length>10?Promise.reject("\u7528\u6237\u540d4~10\u4e2a\u5b57\u7b26"):Promise.resolve()}}],children:Object(m.jsx)(A.a,{})}),Object(m.jsx)(q.a.Item,{label:"\u5bc6\u7801",name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"},{min:4,message:"\u6700\u5c114\u4e2a\u5b57\u7b26"},{max:10,message:"\u6700\u591a10\u4e2a\u5b57\u7b26"}],children:Object(m.jsx)(A.a.Password,{})}),Object(m.jsx)(q.a.Item,Object(L.a)(Object(L.a)({},M),{},{children:Object(m.jsx)(O.a,{ghost:!0,type:"primary",htmlType:"submit",children:"\u63d0\u4ea4"})}))]}))})]})},J={labelCol:{span:6},wrapperCol:{span:18}},V={wrapperCol:{offset:6,span:18}},E=f.a.div(S||(S=Object(b.a)(["\n  max-width: 600px;\n  margin: 30px auto;\n  box-shadow: 2px 2px 4px 0 rgba(0, 0, 0, 0.2);\n  border-radius: 4px;\n  padding: 20px;\n\n  label {\n    color: white\n  }\n"]))),N=f.a.h1(D||(D=Object(b.a)(["\n  color: white;\n  text-align: center;\n  margin-bottom: 30px;\n"]))),Q=function(){var e=Object(h.f)(),t=Object(d.a)().AuthStore;return Object(m.jsxs)(E,{children:[Object(m.jsx)(N,{children:"\u6ce8\u518c"}),Object(m.jsxs)(q.a,Object(L.a)(Object(L.a)({},J),{},{name:"basic",initialValues:{remember:!0},onFinish:function(n){console.log("Success:",n),t.setUsername(n.username),t.setPassword(n.password),t.register().then((function(){console.log("\u767b\u5f55\u6210\u529f"),e.push("/")})).catch((function(){return console.log("\u5931\u8d25,\u4ec0\u4e48\u90fd\u4e0d\u505a")}))},onFinishFailed:function(e){console.log("Failed:",e)},children:[Object(m.jsx)(q.a.Item,{label:"\u7528\u6237\u540d",name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"},{validator:function(e,t){return/\W/.test(t)?Promise.reject("\u53ea\u80fd\u662f\u5b57\u6bcd\u4e0b\u5212\u7ebf"):t.length<4||t.length>10?Promise.reject("\u7528\u6237\u540d4~10\u4e2a\u5b57\u7b26"):Promise.resolve()}}],children:Object(m.jsx)(A.a,{})}),Object(m.jsx)(q.a.Item,{label:"\u5bc6\u7801",name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"},{min:4,message:"\u6700\u5c11\u56db\u4e2a\u5b57\u7b26"},{max:10,message:"\u6700\u591a10\u4e2a\u5b57\u7b26"}],children:Object(m.jsx)(A.a.Password,{})}),Object(m.jsx)(q.a.Item,{label:"\u786e\u8ba4\u5bc6\u7801",name:"confirmPassword",rules:[{required:!0,message:"\u518d\u6b21\u8f93\u5165\u5bc6\u7801"},function(e){var t=e.getFieldValue;return{validator:function(e,n){return t("password")===n?Promise.resolve():Promise.reject("\u4e24\u6b21\u5bc6\u7801\u4e0d\u4e00\u81f4")}}}],children:Object(m.jsx)(A.a.Password,{})}),Object(m.jsx)(q.a.Item,Object(L.a)(Object(L.a)({},V),{},{children:Object(m.jsx)(O.a,{ghost:!0,type:"primary",htmlType:"submit",children:"\u63d0\u4ea4"})}))]}))]})},R=Object(p.lazy)((function(){return Promise.all([n.e(4),n.e(7)]).then(n.bind(null,273))})),W=Object(p.lazy)((function(){return Promise.all([n.e(3),n.e(6)]).then(n.bind(null,274))})),X=Object(p.lazy)((function(){return n.e(5).then(n.bind(null,269))}));var K=function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(U,{}),Object(m.jsx)("main",{children:Object(m.jsx)(p.Suspense,{fallback:Object(m.jsx)(I,{}),children:Object(m.jsxs)(h.c,{children:[Object(m.jsx)(h.a,{path:"/",exact:!0,component:R}),Object(m.jsx)(h.a,{path:"/history",component:W}),Object(m.jsx)(h.a,{path:"/about",component:X}),Object(m.jsx)(h.a,{path:"/Login",component:G}),Object(m.jsx)(h.a,{path:"/Register",component:Q})]})})}),Object(m.jsx)(k,{})]})},Y=function(e){e&&e instanceof Function&&n.e(8).then(n.bind(null,270)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),r(e),i(e),o(e),s(e)}))};u.a.render(Object(m.jsx)(j.a,{children:Object(m.jsx)(K,{})}),document.getElementById("root")),Y()},54:function(e,t,n){"use strict";n.d(t,"a",(function(){return H}));var r=n(0),i=n(33),o=n(44),s=n(45),a=n(11),c=(n(70),n(6)),l=n(39),u=n.n(l);u.a.init({appId:"e6wld81jCjyerNYouHABXBxd-gzGzoHsz",appKey:"C1HCNGu4kPO6UnLHlwkPiQc1",serverURL:"https://e6wld81j.lc-cn-n1-shared.com"});var p,b,j=function(e,t){var n=new l.User;return n.setUsername(e),n.setPassword(t),new Promise((function(e,t){n.signUp().then((function(t){return e(t)}),(function(e){return t(e)}))}))},h=function(e,t){return new Promise((function(n,r){l.User.logIn(e,t).then((function(e){return n(e)}),(function(e){return r(e)}))}))},f=function(){l.User.logOut()},O=function(){return l.User.current()},d={add:function(e,t){var n=new u.a.Object("Image"),r=new u.a.File(t,e);return n.set("filename",t),n.set("owner",u.a.User.current()),n.set("url",r),new Promise((function(e,t){n.save().then((function(t){return e(t)}),(function(e){return t(e)}))}))},find:function(e){var t=e.page,n=void 0===t?0:t,r=e.limit,i=void 0===r?10:r,o=new u.a.Query("Image");return o.include("owner"),o.limit(i),o.skip(n*i),o.descending("createAt"),o.equalTo("owner",u.a.User.current()),new Promise((function(e,t){o.find().then((function(t){return e(t)})).catch((function(e){return t(e)}))}))}};window.Uploader=d;var g,m,y,x,w,v,P,U,F,k,z,C,S=new(p=function(){function e(){Object(o.a)(this,e),Object(i.a)(this,"currentUser",b,this),Object(c.m)(this)}return Object(s.a)(e,[{key:"pullUser",value:function(){this.currentUser=O()}},{key:"resetUser",value:function(){this.currentUser=null}}]),e}(),b=Object(a.a)(p.prototype,"currentUser",[c.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(a.a)(p.prototype,"pullUser",[c.f],Object.getOwnPropertyDescriptor(p.prototype,"pullUser"),p.prototype),Object(a.a)(p.prototype,"resetUser",[c.f],Object.getOwnPropertyDescriptor(p.prototype,"resetUser"),p.prototype),p),D=n(150),I=new(g=function(){function e(){Object(o.a)(this,e),Object(i.a)(this,"list",m,this),Object(i.a)(this,"isLoading",y,this),Object(i.a)(this,"hasMore",x,this),Object(i.a)(this,"page",w,this),this.limit=10,Object(c.m)(this)}return Object(s.a)(e,[{key:"append",value:function(e){this.list=this.list.concat(e)}},{key:"find",value:function(){var e=this;this.isLoading=!0,d.find({page:this.page,limit:this.limit}).then((function(t){e.append(t),e.page++,t.length<e.limit&&(e.hasMore=!1)})).catch((function(e){return D.b.error("\u6570\u636e\u52a0\u8f7d\u5931\u8d25")})).finally((function(){return e.hasMore=!1}))}},{key:"reset",value:function(){this.list=[],this.isLoading=!1,this.hasMore=!0,this.page=0}}]),e}(),m=Object(a.a)(g.prototype,"list",[c.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=Object(a.a)(g.prototype,"isLoading",[c.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),x=Object(a.a)(g.prototype,"hasMore",[c.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),w=Object(a.a)(g.prototype,"page",[c.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(a.a)(g.prototype,"append",[c.f],Object.getOwnPropertyDescriptor(g.prototype,"append"),g.prototype),Object(a.a)(g.prototype,"find",[c.f],Object.getOwnPropertyDescriptor(g.prototype,"find"),g.prototype),Object(a.a)(g.prototype,"reset",[c.f],Object.getOwnPropertyDescriptor(g.prototype,"reset"),g.prototype),g),L=new(v=function(){function e(){Object(o.a)(this,e),Object(i.a)(this,"filename",P,this),Object(i.a)(this,"file",U,this),Object(i.a)(this,"isUpLoading",F,this),Object(i.a)(this,"serverFile",k,this),Object(c.m)(this)}return Object(s.a)(e,[{key:"setFilename",value:function(e){this.filename=e}},{key:"setFile",value:function(e){this.file=e}},{key:"upload",value:function(){var e=this;return this.isUpLoading=!0,this.serverFile=null,new Promise((function(t,n){d.add(e.file,e.filename).then((function(n){e.serverFile=n,t(n)})).catch((function(e){D.b.error("\u4e0a\u4f20\u5931\u8d25"),n(e)})).finally((function(){e.isUpLoading=!1}))}))}},{key:"reset",value:function(){this.isUpLoading=!1,this.serverFile=null}}]),e}(),P=Object(a.a)(v.prototype,"filename",[c.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),U=Object(a.a)(v.prototype,"file",[c.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=Object(a.a)(v.prototype,"isUpLoading",[c.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k=Object(a.a)(v.prototype,"serverFile",[c.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(a.a)(v.prototype,"setFilename",[c.f],Object.getOwnPropertyDescriptor(v.prototype,"setFilename"),v.prototype),Object(a.a)(v.prototype,"setFile",[c.f],Object.getOwnPropertyDescriptor(v.prototype,"setFile"),v.prototype),Object(a.a)(v.prototype,"upload",[c.f],Object.getOwnPropertyDescriptor(v.prototype,"upload"),v.prototype),Object(a.a)(v.prototype,"reset",[c.f],Object.getOwnPropertyDescriptor(v.prototype,"reset"),v.prototype),v),q=new(z=function(){function e(){Object(o.a)(this,e),Object(i.a)(this,"values",C,this),Object(c.m)(this)}return Object(s.a)(e,[{key:"setUsername",value:function(e){this.values.username=e}},{key:"setPassword",value:function(e){this.values.password=e}},{key:"login",value:function(){var e=this;return new Promise((function(t,n){h(e.values.username,e.values.password).then((function(e){S.pullUser(),t(e)})).catch((function(e){D.b.error("\u767b\u5f55\u5931\u8d25"),S.resetUser(),n(e)}))}))}},{key:"register",value:function(){var e=this;return new Promise((function(t,n){j(e.values.username,e.values.password).then((function(e){console.log("\u6ce8\u518c\u6210\u529f"),S.pullUser(),t(e)})).catch((function(e){D.b.error("\u6ce8\u518c\u5931\u8d25"),S.resetUser(),n(e)}))}))}},{key:"logout",value:function(){f(),S.resetUser(),I.reset(),L.reset()}}]),e}(),C=Object(a.a)(z.prototype,"values",[c.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{username:"",password:""}}}),Object(a.a)(z.prototype,"setUsername",[c.f],Object.getOwnPropertyDescriptor(z.prototype,"setUsername"),z.prototype),Object(a.a)(z.prototype,"setPassword",[c.f],Object.getOwnPropertyDescriptor(z.prototype,"setPassword"),z.prototype),Object(a.a)(z.prototype,"login",[c.f],Object.getOwnPropertyDescriptor(z.prototype,"login"),z.prototype),Object(a.a)(z.prototype,"register",[c.f],Object.getOwnPropertyDescriptor(z.prototype,"register"),z.prototype),Object(a.a)(z.prototype,"logout",[c.f],Object.getOwnPropertyDescriptor(z.prototype,"logout"),z.prototype),z),A=Object(r.createContext)({AuthStore:q,UserStore:S,ImageStore:L,HistoryStore:I});window.stores={AuthStore:q,UserStore:S,ImageStore:L,HistoryStore:I};var H=function(){return Object(r.useContext)(A)}}},[[230,1,2]]]);
//# sourceMappingURL=main.0edb0b13.chunk.js.map